<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Private - Cours SQL</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Cours SQL</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 0</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours0/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 1</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours1/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../cours1/cyberchase/instructions/" class="dropdown-item">Cyberchase</a>
</li>
                                    
<li>
    <a href="../../../cours1/normals/instructions/" class="dropdown-item">Normals</a>
</li>
                                    
<li>
    <a href="../../../cours1/players/instructions/" class="dropdown-item">Players</a>
</li>
                                    
<li>
    <a href="../../../cours1/views/instructions/" class="dropdown-item">Views</a>
</li>
                                    
<li>
    <a href="../../../cours1/index_old.md" class="dropdown-item">Old Index</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 2</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours2/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../cours2/dese/instructions/" class="dropdown-item">Dese</a>
</li>
                                    
<li>
    <a href="../../../cours2/moneyball/instructions/" class="dropdown-item">Moneyball</a>
</li>
                                    
<li>
    <a href="../../../cours2/packages/instructions/" class="dropdown-item">Packages</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 3</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours3/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../cours3/atl/instructions/" class="dropdown-item">ATL</a>
</li>
                                    
<li>
    <a href="../../../cours3/connect/instructions/" class="dropdown-item">Connect</a>
</li>
                                    
<li>
    <a href="../../../cours3/doghnut/instructions/" class="dropdown-item">Doghnut</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 4</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours4/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../cours4/dont-panic/instructions/" class="dropdown-item">Don't Panic</a>
</li>
                                    
<li>
    <a href="../../../cours4/meteorites/instructions/" class="dropdown-item">Meteorites</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 5</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../bnb/instructions/" class="dropdown-item">BNB</a>
</li>
                                    
<li>
    <a href="../../census/instructions/" class="dropdown-item">Census</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Private</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 6</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours6/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../cours6/harvard/instructions/" class="dropdown-item">Harvard</a>
</li>
                                    
<li>
    <a href="../../../cours6/snap/instructions/" class="dropdown-item">Snap</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cours 7</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cours7/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../cours7/index2/" class="dropdown-item">Index 2</a>
</li>
                                    
<li>
    <a href="../../../cours7/deep/answers/" class="dropdown-item">Deep Answers</a>
</li>
                                    
<li>
    <a href="../../../cours7/deep/instructions/" class="dropdown-item">Deep Instructions</a>
</li>
                                    
<li>
    <a href="../../../cours7/dont-panic-python/instructions/" class="dropdown-item">Don't Panic Python</a>
</li>
                                    
<li>
    <a href="../../../cours7/linkedin/instructions/" class="dropdown-item">LinkedIn</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">SQLite Python</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../sqlite_python/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../census/instructions/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../../cours6/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#the-private-eye" class="nav-link">The Private Eye</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#probleme-a-resoudre" class="nav-link">Problème à résoudre</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#code-de-distribution" class="nav-link">Code de distribution</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#contexte" class="nav-link">Contexte</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#schema" class="nav-link">Schéma</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#specification" class="nav-link">Spécification</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#conseil" class="nav-link">Conseil</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="the-private-eye"><a href="https://cs50.harvard.edu/sql/2024/psets/4/private/">The Private Eye</a><a class="headerlink" href="#the-private-eye" title="Permanent link">&para;</a></h1>
<p><img alt="A detective's library in the style of an oil painting" src="../../../assets/library.png" /> “A detective’s library in the style of an oil painting,” generated by DALL·E 2</p>
<h2 id="probleme-a-resoudre">Problème à résoudre<a class="headerlink" href="#probleme-a-resoudre" title="Permanent link">&para;</a></h2>
<p><a href="https://cs50.ai/">Le débogueur de canard (duck debugger) de CS50</a> a encore disparu et vous avez désespérément besoin d'un détective. Vous avez entendu des histoires sur un détective qui vit en haut de la ville, toujours secret dans son travail, jamais vu sauf quand il le souhaite. Sans surprise, il s'est avéré être assez insaisissable pour vous. Mais vous voilà, dans son étude, après avoir récupéré son adresse auprès d'un certain employé de la poste.</p>
<p>Sur son bureau en acajou, du papier blanc frais scintille. Inscrit, vous trouvez le tableau suivant :</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>14</td>
<td>98</td>
<td>4</td>
</tr>
<tr>
<td>114</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>618</td>
<td>72</td>
<td>9</td>
</tr>
<tr>
<td>630</td>
<td>7</td>
<td>3</td>
</tr>
<tr>
<td>932</td>
<td>12</td>
<td>5</td>
</tr>
<tr>
<td>2230</td>
<td>50</td>
<td>7</td>
</tr>
<tr>
<td>2346</td>
<td>44</td>
<td>10</td>
</tr>
<tr>
<td>3041</td>
<td>14</td>
<td>5</td>
</tr>
</tbody>
</table>
<p>Et glissé en dessous, un livre usé, Les Aventures de Sherlock Holmes.</p>
<h2 id="code-de-distribution">Code de distribution<a class="headerlink" href="#code-de-distribution" title="Permanent link">&para;</a></h2>
<p>Pour ce problème, vous devrez télécharger <code>private.db</code> et <code>private.sql</code>.</p>
<h2 id="contexte">Contexte<a class="headerlink" href="#contexte" title="Permanent link">&para;</a></h2>
<p>Étant donné la proximité du papier avec Les Aventures de Sherlock Holmes, ce qui est écrit sur celui-ci semble être une variation d'un chiffre de livre (book cipher). Vous savez que dans une version d'un chiffre de livre, le créateur du chiffre vous donne une liste de “triplets” (c'est-à-dire un ensemble de trois nombres). Chaque triplet est structuré comme suit :</p>
<ul>
<li>Le premier nombre du triplet est le numéro de la phrase référencée par l'encodeur.</li>
<li>Le deuxième nombre du triplet est le numéro du caractère, dans cette phrase, où le message commence.</li>
<li>Le troisième nombre du triplet est la longueur du message en caractères (c'est-à-dire combien de caractères lire à partir du premier, y compris les espaces et la ponctuation).</li>
</ul>
<p>Par exemple, considérez le triplet 2, 1, 8 à la lumière des phrases suivantes :</p>
<blockquote>
<p>Quite so! You have not observed. And yet you have seen.</p>
</blockquote>
<p>2 fait référence à la 2ème phrase, “You have not observed.” 1 fait référence au 1er caractère de cette phrase, “Y.” Et 8 fait référence à la longueur du message à partir de ce premier caractère. En commençant par le 1er caractère de la 2ème phrase, en lisant 8 caractères (y compris les espaces !) vous obtenez :</p>
<blockquote>
<p>You have</p>
</blockquote>
<p>Vous pouvez imaginer, maintenant, enchaîner plusieurs tuples pour encoder un message plus long. Peut-être que c'est exactement ce que le détective a fait !</p>
<h2 id="schema">Schéma<a class="headerlink" href="#schema" title="Permanent link">&para;</a></h2>
<p>Dans <code>private.db</code>, vous trouverez une table, <code>sentences</code>. La table <code>sentences</code> contient toutes les phrases des Aventures de Sherlock Holmes. En particulier, elle contient les colonnes suivantes :</p>
<ul>
<li><code>id</code>, qui est l'ID de la phrase</li>
<li><code>sentence</code>, qui est la phrase elle-même</li>
</ul>
<h2 id="specification">Spécification<a class="headerlink" href="#specification" title="Permanent link">&para;</a></h2>
<p>Votre tâche est de décoder le chiffre laissé pour vous par le détective. La manière dont vous le faites dépend de vous, mais vous devez vous assurer que—à la fin de votre processus—vous avez une vue (view) structurée comme suit :</p>
<ul>
<li>La vue doit être nommée <code>message</code></li>
<li>La vue doit avoir une seule colonne, <code>phrase</code></li>
<li>Lorsque la requête SQL (SQL query) suivante est exécutée sur <code>private.db</code>, votre vue doit renvoyer une seule colonne dans laquelle chaque ligne est une phrase du message.</li>
</ul>
<pre><code>SELECT &quot;phrase&quot; FROM &quot;message&quot;;
</code></pre>
<p>Dans <code>private.sql</code>, vous devez écrire toutes les instructions SQL (SQL statements) nécessaires pour reproduire votre création de la vue. C'est-à-dire :</p>
<ul>
<li>Si la création de la vue nécessite la création d'une table séparée et l'insertion de données dans celle-ci, vous devez vous assurer que <code>private.sql</code> contient les instructions pour créer cette table et insérer ces données. (N'ayez pas peur d'ajouter des tables et d'ajouter des données comme vous le souhaitez !)</li>
<li><code>private.sql</code>, lorsqu'il est exécuté sur une nouvelle instance de <code>private.db</code>, doit être capable de reconstruire entièrement votre vue.</li>
</ul>
<h2 id="conseil">Conseil<a class="headerlink" href="#conseil" title="Permanent link">&para;</a></h2>
<p>Il s'avère que SQLite est équipé d'une fonction qui implémente exactement la fonctionnalité du chiffre de livre : <code>substr</code>. La fonction <code>substr</code> prend trois entrées (“arguments”) :</p>
<ul>
<li>Une chaîne (c'est-à-dire du texte) à partir de laquelle prendre une sous-chaîne (c'est-à-dire un sous-ensemble des caractères de la chaîne)</li>
<li>Le caractère de début de la sous-chaîne, identifié par son numéro (le premier caractère est 1)</li>
<li>La longueur de la sous-chaîne</li>
</ul>
<p>Par exemple, supposons que vous ayez une table appelée <code>sentences</code> qui inclut ce qui suit :</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Quite so!</td>
</tr>
<tr>
<td>2</td>
<td>You have not observed.</td>
</tr>
<tr>
<td>3</td>
<td>And yet you have seen.</td>
</tr>
</tbody>
</table>
<p>Si vous exécutez la requête SQL suivante…</p>
<pre><code class="language-sqlite">SELECT substr(&quot;sentence&quot;, 1, 2)
FROM &quot;sentences&quot;;
</code></pre>
<p>vous recevrez les résultats suivants :</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Substring (1, 2)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Qu</td>
</tr>
<tr>
<td>2</td>
<td>Yo</td>
</tr>
<tr>
<td>3</td>
<td>An</td>
</tr>
</tbody>
</table>
<p>Gardez à l'esprit que les autres arguments de <code>substr</code> peuvent également être des colonnes entières !</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
